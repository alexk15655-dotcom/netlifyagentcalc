<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta http-equiv="Content-Security-Policy" 
        content="default-src 'self'; 
                 script-src 'self' 'unsafe-inline'; 
                 style-src 'self' 'unsafe-inline'; 
                 connect-src 'none';">
  
  <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã - Cashier Checkup</title>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/results.css">
</head>
<body>
  <div class="results-container">
    <header class="results-header">
      <h1>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏</h1>
      <a href="index.html" class="btn-back">‚Üê –ù–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞</a>
    </header>
    
    <nav class="tabs">
      <button class="tab-btn active" data-tab="fgSummary">
        üìà –°–≤–æ–¥–∫–∞ –§–ì
      </button>
      <button class="tab-btn" data-tab="processed">
        üìä –ö–∞–ª—å–∫—É–ª—è—Ü–∏—è
      </button>
      <button class="tab-btn" data-tab="fraud">
        üö® –§—Ä–æ–¥-–∞–Ω–∞–ª–∏–∑
      </button>
    </nav>
    
    <!-- –°–≤–æ–¥–∫–∞ –§–ì -->
    <div id="fgSummary" class="tab-content active">
      <div class="content-header">
        <h2>–°–≤–æ–¥–∫–∞ –ø–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –≥—Ä—É–ø–ø–∞–º</h2>
        <div class="actions">
          <button onclick="exportCSV('fgSummary')" class="btn-export">
            üíæ –≠–∫—Å–ø–æ—Ä—Ç CSV
          </button>
        </div>
      </div>
      <div class="table-wrapper">
        <table id="fgSummaryTable" class="data-table"></table>
      </div>
    </div>
    
    <!-- –ö–∞–ª—å–∫—É–ª—è—Ü–∏—è -->
    <div id="processed" class="tab-content">
      <div class="content-header">
        <h2>–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
        <div class="actions">
          <button onclick="exportCSV('processed')" class="btn-export">
            üíæ –≠–∫—Å–ø–æ—Ä—Ç CSV
          </button>
        </div>
      </div>
      <div id="processedTable"></div>
    </div>
    
    <!-- –§—Ä–æ–¥-–∞–Ω–∞–ª–∏–∑ -->
    <div id="fraud" class="tab-content">
      <div class="content-header">
        <h2>–ê–Ω–∞–ª–∏–∑ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤</h2>
        <div class="actions">
          <button onclick="exportCSV('fraud')" class="btn-export">
            üíæ –≠–∫—Å–ø–æ—Ä—Ç CSV
          </button>
        </div>
      </div>
      
      <!-- –ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ -->
      <div style="margin-bottom: 16px; padding: 12px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; gap: 12px;">
        <button class="btn-secondary" onclick="toggleSelectAll()" style="padding: 8px 16px;">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
        <button class="btn-secondary" onclick="toggleSelectNone()" style="padding: 8px 16px;">–°–Ω—è—Ç—å –≤—Å–µ</button>
        <span id="selectedCount" style="margin-left: 16px; font-weight: 500; color: #555;">–í—ã–±—Ä–∞–Ω–æ: 0 –∏–∑ 0</span>
      </div>
      
      <!-- –§–∏–ª—å—Ç—Ä—ã -->
      <div class="fraud-filters">
        <div class="filter-section">
          <label class="filter-label">Severity:</label>
          <label class="filter-checkbox">
            <input type="checkbox" id="filterHigh" checked onchange="applyFraudFilters()">
            <span class="severity-badge high">HIGH</span>
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" id="filterMedium" checked onchange="applyFraudFilters()">
            <span class="severity-badge medium">MEDIUM</span>
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" id="filterLow" checked onchange="applyFraudFilters()">
            <span class="severity-badge low">LOW</span>
          </label>
        </div>
        
        <div class="filter-section">
          <label class="filter-label">–¢–∏–ø—ã:</label>
          <label class="filter-checkbox">
            <input type="checkbox" id="filterHighWithdrawals" checked onchange="applyFraudFilters()">
            –í—ã—Å–æ–∫–∏–µ –≤—ã–≤–æ–¥—ã
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" id="filterHighBalancedFlow" checked onchange="applyFraudFilters()">
            –ö—Ä—É–ø–Ω—ã–µ –±–ª–∏–∑–∫–∏–µ –≤–≤–æ–¥—ã-–≤—ã–≤–æ–¥—ã
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" id="filterAgentSelfPlay" checked onchange="applyFraudFilters()">
            –ê–≥–µ–Ω—Ç –∏–≥—Ä–∞–µ—Ç
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" id="filterEmptyAccounts" checked onchange="applyFraudFilters()">
            –ü—É—Å—Ç—ã–µ
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" id="filterTrashAccounts" onchange="applyFraudFilters()">
            –ú—É—Å–æ—Ä–Ω—ã–µ
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" id="filterMultiAccounts" checked onchange="applyFraudFilters()">
            –ú—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç—ã
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" id="filterAgentTakeover" checked onchange="applyFraudFilters()">
            –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –≤—ã–≤–æ–¥–æ–≤
          </label>
        </div>
        
        <div class="filter-section">
          <label class="filter-checkbox">
            <input type="checkbox" id="groupByAgent" checked onchange="applyFraudFilters()">
            –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∞–≥–µ–Ω—Ç–∞–º
          </label>
        </div>
        
        <div class="fraud-stats">
          <span id="fraudStatsTotal">–í—Å–µ–≥–æ: 0</span> |
          <span id="fraudStatsShown">–ü–æ–∫–∞–∑–∞–Ω–æ: 0</span>
        </div>
      </div>
      
      <div id="fraudContent"></div>
    </div>
  </div>
  
  <script src="lib/papaparse.min.js"></script>
  <script src="js/ui/export.js"></script>
  <script src="js/results.js"></script>
</body>
</html>
